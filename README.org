#+title: N-layer shallow water model coupled with Wavewatch III
#+NAME: Charles-Ã‰douard Lizotte
#+DATE: 13 juin 2023



** Introduction
Here lies the Fortran algorithm for a N-layer /shallow water/ model.
This Fortran code is used to simulate large scale oceanic bassin circulation -- and eventually couple it with a waves' statistic model, such as Wavewatch III.
Initially, the overall algorithm is based on a 2 layers shallow water model coupled with a Ekman slab layer from [[https://github.com/tpeng2/ELSLabSW][GitHub's user tpeng2]] who work with the same team as me.

** Description of each parameters (parameters.f90)
What you find here is a description of each parameters you would find in the parameters file /parameters.f90/.
Unless you want to change the code of the model, this would be the only file you would interact with before running the model.
Parameters describe the scale of the experiment as well as physical quantities such as wind force and bottom drag.
The /parameters.f90/ file also describe output generation as we will see in the next section.

*** Grid description
The underlying grid must be big in order to simulate large scale geostrophic circulation and baroclinic instabilities/eddies, which is why the grid would be about 2000 km wide.
Grid parameters can be found in the table [[tab:grid-param]]. 

#+CAPTION: Grid parameters summary.
#+NAME: tab:grid-param
|-----------+--------------------------+---------+---------------+-------|
| Parameter | Name                     | Type    | Default value | Units |
|-----------+--------------------------+---------+---------------+-------|
| Lx,Ly     | Domain size              | REAL    |          2.e6 | m     |
| H1        | First layer thickness    | REAL    |          1.e3 | m     |
| H2        | Second layer thickness   | REAL    |          1.e3 | m     |
| H3        | Third layer thickness    | REAL    |          1.e3 | m     |
| nx,ny     | Number of grid points    | INTEGER |           512 | -     |
| nz        | Number of layers         | INTEGER |             3 | -     |
| dx,dy     | Grid resolution          | REAL    |  Lx/nx, Ly/ny | m     |
| nnx,nny   | Ghost points domain size | INTEGER |    nx+1, ny+1 | -     |
|-----------+--------------------------+---------+---------------+-------|

*** Physical parameters 

Physical parameters describe physical forces applied onto and into the ocean.

#+CAPTION: Physical parameters summary.
|-----------+------------------------------------------------------+------+---------------+------------------------|
| Parameter | Name                                                 | Type | Default value | Units                  |
|-----------+------------------------------------------------------+------+---------------+------------------------|
| tau0      | Amplitude of wind stress $\left(\tau/(\rho h)right)$ | REAL |         1.e-4 | ms^{-2}                |
| tau1      | Stochastic amplitude of wind stress                  | REAL |         1.e-5 | ms^{-2}                |
| f0        | Coriolis parameter                                   | REAL |         1.e-7 | rad \cdot s^{-1}       |
| beta      | Beta plane parameter                                 | REAL |            0. | rad \cdot s^{-1}m^{-1} |
| r_drag    | Bottom drag                                          | REAL |         1.e-7 | s^{-1}                 |
| r_invLap  | Inverse Laplacian coefficient                        | REAL |         1.e-6 | ?                      |
| Ah        | Friction coefficient                                 | REAL |    1.e-5*dx^4 | ?                      |
| rf        | Robert filter coefficient                            | REAL |         0.001 | -                      |
| c_bc      | Baroclinic wave speed (soon obsolete)                | REAK |            2. | m/s                    |
|-----------+------------------------------------------------------+------+---------------+------------------------|


*** Time parameters 
